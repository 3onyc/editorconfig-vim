language: python

# We support from Python 2.4 to 2.7. However, 2.4 is not supported by travis,
# so it is not listed here
python:
  - "2.5"
  - "2.6"
  - "2.7"
  - "jython"

# we need cmake, and jython if the python version is "jython"
install:
  - sudo apt-get install cmake
  - if [ "$TRAVIS_PYTHON_VERSION" == "jython" ]; then sudo apt-get install jython; fi

before_script:
  - if [ "$TRAVIS_PYTHON_VERSION" == "jython" ]; then export PYTHON_EXECUTABLE=$(which jython); fi
  - echo $PYTHON_EXECUTABLE

# test script
script:
  - cmake -DPYTHON_EXECUTABLE=$PYTHON_EXECUTABLE .
  - ctest -V .

# Notify the mailing list
notifications:
 recipients:
   - editorconfig@googlegroups.com
 email:
   on_success: change
   on_failure: always
